<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Aplica√ß√£o de Acompanhamento de Sa√∫de</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="src/css/login.css">
</head>
<body class="gradient-bg min-h-screen flex items-center justify-center p-4">
    <div class="glass-effect rounded-2xl p-8 w-full max-w-md">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-white mb-2">üè• Sa√∫de Tracker</h1>
            <p class="text-white/80">Fa√ßa login para acessar sua conta</p>
        </div>

        <!-- Login Form -->
        <form id="login-form" class="form-container">
            <div>
                <label for="email" class="form-label">Email</label>
                <input type="email" id="email" name="email" required 
                       class="login-input"
                       placeholder="seu@email.com">
            </div>

            <div>
                <label for="password" class="form-label">Password</label>
                <input type="password" id="password" name="password" required 
                       class="login-input"
                       placeholder="A sua password">
            </div>

            <button type="submit" id="login-btn" class="login-btn">
                Entrar
            </button>
        </form>

        <!-- Registration Link -->
        <div class="mt-6 text-center">
            <p class="text-white/80">N√£o tem uma conta?</p>
            <button onclick="showRegistration()" class="login-link mt-2">
                Criar conta
            </button>
        </div>

        <!-- Registration Form (Hidden by default) -->
        <form id="registration-form" class="form-container hidden">
            <div>
                <label for="reg-name" class="form-label">Nome</label>
                <input type="text" id="reg-name" name="name" required 
                       class="login-input"
                       placeholder="Seu nome completo">
            </div>

            <div>
                <label for="reg-email" class="form-label">Email</label>
                <input type="email" id="reg-email" name="email" required 
                       class="login-input"
                       placeholder="seu@email.com">
            </div>

            <div>
                <label for="reg-password" class="form-label">Password</label>
                <input type="password" id="reg-password" name="password" required 
                       class="login-input"
                       placeholder="A sua password (m√≠nimo 6 caracteres)"
                       oninput="validatePassword()">
                <div id="password-feedback" class="text-xs mt-1 hidden"></div>
            </div>

            <button type="submit" id="register-btn" class="login-btn" disabled>
                Criar Conta
            </button>
        </form>

        <!-- Back to Login Link (Hidden by default) -->
        <div id="back-to-login" class="mt-6 text-center hidden">
            <button onclick="showLogin()" class="login-link">
                ‚Üê Voltar para login
            </button>
        </div>

        <!-- Status Messages -->
        <div id="status-message" class="hidden"></div>
    </div>

    <!-- Password validation script -->
    <script>
        function validatePassword() {
            validateRegistrationForm();
        }
        
        function validateRegistrationForm() {
            const nameInput = document.getElementById('reg-name');
            const emailInput = document.getElementById('reg-email');
            const passwordInput = document.getElementById('reg-password');
            const registerBtn = document.getElementById('register-btn');
            const feedbackDiv = document.getElementById('password-feedback');
            
            if (!nameInput || !emailInput || !passwordInput || !registerBtn || !feedbackDiv) return;
            
            const name = nameInput.value.trim();
            const email = emailInput.value.trim();
            const password = passwordInput.value;
            const minLength = 6;
            
            // Check if all fields are filled and password is valid
            const isNameValid = name.length >= 2;
            const isEmailValid = email.includes('@') && email.includes('.');
            const isPasswordValid = password.length >= minLength;
            
            if (password.length < minLength) {
                // Password too short
                feedbackDiv.textContent = `A password deve ter pelo menos ${minLength} caracteres`;
                feedbackDiv.className = 'text-xs mt-1 text-red-300';
                feedbackDiv.classList.remove('hidden');
                registerBtn.disabled = true;
                registerBtn.classList.add('opacity-50', 'cursor-not-allowed');
            } else if (!isNameValid || !isEmailValid) {
                // Other fields invalid
                feedbackDiv.textContent = 'Preencha todos os campos corretamente';
                feedbackDiv.className = 'text-xs mt-1 text-red-300';
                feedbackDiv.classList.remove('hidden');
                registerBtn.disabled = true;
                registerBtn.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                // All fields valid
                feedbackDiv.textContent = '‚úì Formul√°rio v√°lido';
                feedbackDiv.className = 'text-xs mt-1 text-green-300';
                feedbackDiv.classList.remove('hidden');
                registerBtn.disabled = false;
                registerBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }
        
        // Add event listeners to all registration form fields
        document.addEventListener('DOMContentLoaded', function() {
            const nameInput = document.getElementById('reg-name');
            const emailInput = document.getElementById('reg-email');
            const passwordInput = document.getElementById('reg-password');
            
            if (nameInput) nameInput.addEventListener('input', validateRegistrationForm);
            if (emailInput) emailInput.addEventListener('input', validateRegistrationForm);
            if (passwordInput) passwordInput.addEventListener('input', validateRegistrationForm);
        });
    </script>

    <!-- Load JavaScript -->
    <script src="src/js/login.js"></script>
</body>
</html> 